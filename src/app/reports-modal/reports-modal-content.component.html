<div class="row">
	<div class="col-md-12">
		<div class="row">
			<div class="col-md-6">
				<h2 mat-dialog-title>Получение отчетов</h2>
			</div>
			<div class="col-md-6">
				<i style="float: right;" class="material-icons">
					clear
					</i>
			</div>
		</div>
	</div>
</div>

<mat-dialog-content class="mat-typography">
	<mat-tab-group (selectedIndexChange)="tabChange($event)"  mat-stretch-tabs animationDuration="5ms">
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="reports-catalog-tab-icon">folder_open</mat-icon>
        Каталог
      </ng-template>
      <form class="example-form">
        <div>
          <mat-form-field appearance="fill" class="example-full-width">
            <input [disabled]=true matInput value="{{data.sliceId}}">
          </mat-form-field>
          <mat-form-field appearance="fill" class="example-full-width">
            <input [disabled]=true matInput value="{{data.slicePeriod}}">
          </mat-form-field>
        </div>
        <div>
          <span>Язык отчета</span>
          <mat-checkbox>Русский</mat-checkbox>
          <mat-checkbox>Казахский</mat-checkbox>
        </div>
      </form>
      <div class="reports-list">
        <div class="row">
          <div class="col-sm-6">
            <h3 mat-dialog-title>Запрошенные отчеты</h3>
            <div class="selected-reports">
              
            </div>
          </div>
          <div class="col-sm-6">
            <h3 mat-dialog-title>Отчеты</h3>
            <div class="reports">

            </div>
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="{{group.name}}" *ngFor="let group of reportGroups; let index = index">
      <div class="container-fluid">
        <div class="row">
          <!-- Treetable grid for Regions -->
          <div class="col-sm-6" *ngIf="gridRegDataArray != undefined">
            <p-treeTable [value]="gridRegDataArray[group.code]" [columns]="colsReg" (onNodeExpand)="onNodeExpand($event)" [lazy]="true" [loading]="loadingReg" selectionMode="checkbox" [(selection)]="selectedNodesArray[group.code]" dataKey="code" (onNodeSelect)="nodeRegSelect($event, group.code)" (onNodeUnselect)="nodeRegUnselect($event, group.code)" *ngIf="!loadingReg">
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th *ngFor="let col of columns">
                    {{col.header}}
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowNode let-rowData="rowData" let-columns="columns">
                <tr [ttSelectableRow]="rowNode">
                  <td *ngFor="let col of columns; let i = index">
                    <p-treeTableToggler [rowNode]="rowNode" *ngIf="i == 0"></p-treeTableToggler>
                    <p-treeTableCheckbox [value]="rowNode" *ngIf="i == 0"></p-treeTableCheckbox>
                    {{rowData[col.field]}}
                  </td>
                </tr>
              </ng-template>
            </p-treeTable>
          </div>
          <!-- END Treetable grid for Regions -->
          <!-- Treetable grid for Departments -->
          <div class="col-sm-6" *ngIf="gridDepDataArray != undefined">
            <p-treeTable [value]="gridDepDataArray[group.code]" [columns]="colsDep" (onNodeExpand)="onNodeExpand($event)" [lazy]="true" [loading]="loading" selectionMode="checkbox" [(selection)]="selectedNodesArray[group.code]" dataKey="code" (onNodeSelect)="nodeSelect($event, group.code)" (onNodeUnselect)="nodeUnselect($event, group.code)" *ngIf="!loading">
              {{group.name}}
              <ng-template pTemplate="header" let-columns>
                <tr>
                  <th *ngFor="let col of columns">
                    {{col.header}}
                  </th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-rowNode let-rowData="rowData" let-columns="columns">
                  <tr [ttSelectableRow]="rowNode">
                    <td *ngFor="let col of columns; let i = index">
                      <p-treeTableToggler [rowNode]="rowNode" *ngIf="i == 0"></p-treeTableToggler>
                      <p-treeTableCheckbox [value]="rowNode" *ngIf="i == 0"></p-treeTableCheckbox>
                      {{rowData[col.field]}}
                    </td>
                  </tr>
              </ng-template>
            </p-treeTable>
          </div>
          <!-- END Treetable grid for Departments -->
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button [mat-dialog-close]="true">Получить</button>
  <button mat-button mat-dialog-close>Отмена</button>
</mat-dialog-actions>

